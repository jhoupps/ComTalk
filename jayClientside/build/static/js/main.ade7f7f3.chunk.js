(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){},13:function(e,t,a){e.exports=a(26)},21:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(12),o=a.n(s),i=a(1),u=a.n(i),l=a(2),c=a(3),m=a(4),d=a(6),p=a(5),f=a(7),h={signIn:"SIGNIN",signUp:"SIGNUP",signedInMain:"SIGNEDIN_MAIN",signedInUpdateName:"SIGNEDIN_UPDATENAME",signedInUpdateAvatar:"SIGNEDIN_UPDATEAVATAR",forgotPassword:"FORGOT_PASSWORD",createNewForum:"CREATE_NEW_FORUM",viewForum:"VIEW_FORUM"},E=a(8),b=function(e){var t=e.setField,a=e.submitForm,n=e.values,s=e.fields;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:a},s.map(function(e){var a=e.key,s=e.name;return r.a.createElement("div",{key:a,id:"form_entry"},r.a.createElement("span",null,s,": "),r.a.createElement("input",{value:n[a],name:a,onChange:t,type:"password"===a||"passwordConf"===a?"password":""}))}),r.a.createElement("input",{id:"submit_button",type:"submit",value:"Submit"})))},g={base:"https://api.comtalk.tech",testbase:"https://localhost:4000",handlers:{users:"/v1/Seattle/users",myuser:"/v1/Seattle/users/me",myuserAvatar:"/v1/Seattle/users/me/avatar",sessions:"/v1/Seattle/sessions",sessionsMine:"/v1/Seattle/sessions/mine",resetPasscode:"/v1/Seattle/resetcodes",passwords:"/v1/Seattle/passwords/",forum:"/v1/Seattle/forum",specificForum:"/v1/Seattle/forum/"}},v=(a(21),function(e){var t=e.error,a=e.setError;switch(t){case"":return r.a.createElement(r.a.Fragment,null);default:return r.a.createElement("div",{className:"error"},r.a.createElement("span",{className:"error-hide",onClick:function(){return a("")}},"x"),"Error: ",t)}}),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).setField=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.setError=function(e){a.setState({error:e})},a.submitForm=function(){var e=Object(l.a)(u.a.mark(function e(t){var n,r,s,o,i,l,c,m,d,p,f,h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.email,s=n.userName,o=n.firstName,i=n.lastName,l=n.password,c=n.passwordConf,m={email:r,userName:s,firstName:o,lastName:i,password:l,passwordConf:c},e.next=5,fetch(g.base+g.handlers.users,{method:"POST",body:JSON.stringify(m),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((d=e.sent).status>=300)){e.next=12;break}return e.next=9,d.text();case 9:return p=e.sent,a.setError(p),e.abrupt("return");case 12:return f=d.headers.get("Authorization"),localStorage.setItem("Authorization",f),a.setError(""),a.props.setAuthToken(f),e.next=18,d.json();case 18:h=e.sent,a.props.setUser(h);case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",userName:"",firstName:"",lastName:"",password:"",passwordConf:"",error:""},a.fields=[{name:"Email",key:"email"},{name:"Username",key:"userName"},{name:"First name",key:"firstName"},{name:"Last name",key:"lastName"},{name:"Password",key:"password"},{name:"Password Confirmation",key:"passwordConf"}],a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{error:a,setError:this.setError}),r.a.createElement(b,{setField:this.setField,submitForm:this.submitForm,values:t,fields:this.fields}),r.a.createElement("button",{id:"submit_button",onClick:function(t){return e.props.setPage(t,h.signIn)}},"Sign in instead"))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).setField=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.setError=function(e){a.setState({error:e})},a.submitForm=function(){var e=Object(l.a)(u.a.mark(function e(t){var n,r,s,o,i,l,c,m;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.email,s=n.password,o={email:r,password:s},e.next=5,fetch(g.base+g.handlers.sessions,{method:"POST",body:JSON.stringify(o),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((i=e.sent).status>=300)){e.next=12;break}return e.next=9,i.text();case 9:return l=e.sent,a.setError(l),e.abrupt("return");case 12:return c=i.headers.get("Authorization"),localStorage.setItem("Authorization",c),a.setError(""),a.props.setAuthToken(c),e.next=18,i.json();case 18:m=e.sent,a.props.setUser(m);case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",password:"",error:""},a.fields=[{name:"Email",key:"email"},{name:"Password",key:"password"}],a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{error:a,setError:this.setError}),r.a.createElement("h1",null,"ComTalk"),r.a.createElement("div",{id:"form_entry"},r.a.createElement(b,{setField:this.setField,submitForm:this.submitForm,values:t,fields:this.fields})),r.a.createElement("button",{id:"sign_up",onClick:function(t){return e.props.setPage(t,h.signUp)}},"Sign Up"),r.a.createElement("button",{id:"forgot_password",onClick:function(t){return e.props.setPage(t,h.forgotPassword)}},"Forgot Password"),r.a.createElement("footer",null,r.a.createElement("p",null,"Andy | Jay | Rayna | Wanyu | Copyright \xa9 2020")))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).sendResetCode=function(){var e=Object(l.a)(u.a.mark(function e(t){var n,r,s,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.email,r={email:n},e.next=5,fetch(g.base+g.handlers.resetPasscode,{method:"POST",body:JSON.stringify(r),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((s=e.sent).status>=300)){e.next=12;break}return e.next=9,s.text();case 9:return o=e.sent,a.setError(o),e.abrupt("return");case 12:a.setError(""),alert("A reset code has been sent to your email"),a.setState({resetCodeSent:!0});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.updatePassword=function(){var e=Object(l.a)(u.a.mark(function e(t){var n,r,s,o,i,l,c,m;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.email,s=n.password,o=n.passwordConf,i=n.resetCode,l={password:s,passwordConf:o,resetCode:i},e.next=5,fetch(g.base+g.handlers.passwords+r,{method:"PUT",body:JSON.stringify(l),headers:new Headers({"Content-Type":"application/json"})});case 5:if(!((c=e.sent).status>=300)){e.next=12;break}return e.next=9,c.text();case 9:return m=e.sent,a.setError(m),e.abrupt("return");case 12:a.setError(""),alert("Your password has been updated");case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.setValue=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.setError=function(e){a.setState({error:e})},a.state={email:"",password:"",passwordConf:"",resetCode:"",resetCodeSent:!1,error:""},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,s=t.passwordConf,o=t.resetCode,i=t.resetCodeSent,u=t.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{error:u,setError:this.setError}),i?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(t){return e.updatePassword(t)}},r.a.createElement("div",{id:"form_entry"},r.a.createElement("span",null,"Password: "),r.a.createElement("input",{name:"password",type:"password",onChange:this.setValue,value:n})),r.a.createElement("div",{id:"form_entry"},r.a.createElement("span",null,"Password Confirmation: "),r.a.createElement("input",{name:"passwordConf",type:"password",onChange:this.setValue,value:s})),r.a.createElement("div",{id:"form_entry"},r.a.createElement("span",null,"Reset Code: "),r.a.createElement("input",{name:"resetCode",onChange:this.setValue,value:o})),r.a.createElement("input",{id:"submit_button",type:"submit",value:"Update my password"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(t){return e.sendResetCode(t)}},r.a.createElement("div",null,r.a.createElement("span",null,"Email: "),r.a.createElement("input",{name:"email",onChange:this.setValue,value:a})),r.a.createElement("input",{id:"reset_button",type:"submit",value:"Send Reset Code"}))),r.a.createElement("button",{onClick:function(t){return e.props.setPage(t,h.signIn)}},"Back to sign in"))}}]),t}(n.Component),S=function(e){var t=e.page,a=e.setPage,n=e.setAuthToken,s=e.setUser;switch(t){case h.signUp:return r.a.createElement(w,{setPage:a,setAuthToken:n,setUser:s});case h.signIn:return r.a.createElement(y,{setPage:a,setAuthToken:n,setUser:s});case h.forgotPassword:return r.a.createElement(k,{setPage:a});default:return r.a.createElement(r.a.Fragment,null,"Error, invalid path reached")}},O=a(9),C=(a(11),function(e){e.user;var t=e.setPage,a=Object(n.useState)(null),s=Object(O.a)(a,2),o=s[0],i=s[1],c=Object(n.useState)(null),m=Object(O.a)(c,2),d=m[0],p=m[1],f=Object(n.useState)(null),E=Object(O.a)(f,2),b=E[0],v=E[1],w=Object(n.useState)(null),y=Object(O.a)(w,2),k=y[0],S=y[1],C=Object(n.useState)(null),j=Object(O.a)(C,2),F=j[0],P=j[1];function A(){return(A=Object(l.a)(u.a.mark(function e(){var t,a,n,r,s,o,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g.base+g.handlers.forum,{method:"GET",headers:new Headers({Authorization:localStorage.getItem("Authorization")})});case 2:if(!((t=e.sent).status>=300)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.json();case 7:a=e.sent,n="";try{n=a[0].name}finally{i(n)}r="";try{r=a[1].name}finally{p(r)}s="";try{s=a[2].name}finally{v(s)}o="";try{o=a[3].name}finally{S(o)}l="";try{l=a[4].name}finally{P(l)}case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}return Object(n.useEffect)(function(){!function(){A.apply(this,arguments)}()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Seattle's 5 Highlighted Forums")," "),r.a.createElement("div",{id:"subscribed_channels"},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){t(e,h.viewForum)}},o)),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){t(e,h.viewForum)}},d)),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){t(e,h.viewForum)}},b)),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){t(e,h.viewForum)}},k)),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){t(e,h.viewForum)}},F))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){t(e,h.createNewForum)}},"New Forum")))))}),j=function(e){var t=e.setAuthToken,a=e.setUser,s=Object(n.useState)(""),o=Object(O.a)(s,2),i=o[0],c=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{id:"sign_out",onClick:function(){var e=Object(l.a)(u.a.mark(function e(n){var r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch(g.base+g.handlers.sessionsMine,{method:"DELETE"});case 3:if(!((r=e.sent).status>=300)){e.next=10;break}return e.next=7,r.text();case 7:return s=e.sent,c(s),e.abrupt("return");case 10:localStorage.removeItem("Authorization"),c(""),t(""),a(null);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},"Sign Out"),i&&r.a.createElement("div",null,r.a.createElement(v,{error:i,setError:c})))},F=(n.Component,n.Component,function(e){e.user,e.setPage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Hiking for the Win!")),r.a.createElement("div",null,r.a.createElement("div",{id:"posts"},r.a.createElement("div",{id:"rendered_messages"},r.a.createElement("div",{id:"post"},r.a.createElement("div",{id:"username"},r.a.createElement("p",null,"John Doe")),r.a.createElement("div",{id:"timestamp"},r.a.createElement("p",null,"10/7/2020 5:00 pm")),r.a.createElement("div",{id:"mesage"},r.a.createElement("p",null,"Hey! Does anyone want to go on a hike in the PNW?"))),r.a.createElement("div",{id:"post"},r.a.createElement("div",{id:"username"},r.a.createElement("p",null,"Jill Donovan")),r.a.createElement("div",{id:"timestamp"},r.a.createElement("p",null,"10/7/2020 7:12 pm")),r.a.createElement("div",{id:"mesage"},r.a.createElement("p",null,"Hiya! I am so down! Saturday? PS. Our initials match *Heart*!")))))),r.a.createElement("div",{id:"new_message_container"},r.a.createElement("label",{for:"new_message"}),r.a.createElement("textarea",{id:"new_message"}),r.a.createElement("button",{"aria-label":"Send"},"Send"))))}),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).setField=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.setError=function(e){a.setState({error:e})},a.submitForum=function(){var e=Object(l.a)(u.a.mark(function e(t){var n,r,s,o,i,l,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.name,s=n.description,o={name:r,description:s},e.next=5,fetch(g.base+g.handlers.forum,{method:"POST",body:JSON.stringify(o),headers:new Headers({"Content-Type":"application/json"})});case 5:return i=e.sent,l=i.headers.get("Authorization"),localStorage.setItem("Authorization",l),e.next=10,i.json();case 10:c=e.sent,a.props.setUser(c);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={name:"",description:"",error:""},a.fields=[{name:"Name",key:"name"},{name:"Description",key:"description"}],a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.description;e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("div",null,"Create a new forum"),r.a.createElement("br",null),r.a.createElement("div",null,"Instruction: Please enter the name and description for your new forum, and click on the",r.a.createElement("strong",null," Submit")," button to submit your response. Use the ",r.a.createElement("strong",null,"Back to main "),"button to go back to the main page. Congratulations, you've just successfully created your new forum now!"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.submitForum},r.a.createElement("div",{id:"form_entry"},r.a.createElement("span",null,"Forum Name: "),r.a.createElement("input",{name:"name",value:t,onChange:this.setField})),r.a.createElement("div",{id:"form_entry"},r.a.createElement("span",null,"Description: "),r.a.createElement("input",{name:"description",value:a,onChange:this.setField})),r.a.createElement("input",{id:"submit_button",ype:"submit",value:"Submit"})),r.a.createElement("br",null))}}]),t}(n.Component),A=function(e){var t=e.page,a=e.setPage,n=e.setAuthToken,s=e.setUser,o=e.user,i=r.a.createElement(r.a.Fragment,null),u=!0;switch(t){case h.signedInMain:i=r.a.createElement(C,{user:o,setPage:a});break;case h.signedInUpdateName:i=r.a.createElement(r.a.Fragment,null,"If you're seeing this, Jay successfully removed the updateName page");break;case h.signedInUpdateAvatar:i=r.a.createElement(r.a.Fragment,null,"If you're seeing this, Jay successfully removed the updateAvatar page");break;case h.viewForum:i=r.a.createElement(F,{user:o,setUser:s});break;case h.createNewForum:i=r.a.createElement(P,{user:o,setPage:s});break;default:i=r.a.createElement(r.a.Fragment,null,"Error, invalid path reached"),u=!1}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("h1",null,"ComTalk")," "),r.a.createElement("div",{id:"landing_title"},"Hello, ",o.firstName," ",o.lastName))),i,u&&r.a.createElement("button",{id:"back_home",onClick:function(e){return a(e,h.signedInMain)}},"Back to Main"),r.a.createElement(j,{setUser:s,setAuthToken:n}),r.a.createElement("footer",null,r.a.createElement("p",null,"Andy | Jay | Rayna | Wanyu | Copyright \xa9 2020")))},N=(a(24),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).getCurrentUser=Object(l.a)(u.a.mark(function t(){var a,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.authToken){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch(g.base+g.handlers.myuser,{headers:new Headers({Authorization:e.state.authToken})});case 4:if(!((a=t.sent).status>=300)){t.next=11;break}return alert("Unable to verify login. Logging out..."),localStorage.setItem("Authorization",""),e.setAuthToken(""),e.setUser(null),t.abrupt("return");case 11:return t.next=13,a.json();case 13:n=t.sent,e.setUser(n);case 15:case"end":return t.stop()}},t,this)})),e.setPageToSignIn=function(t){t.preventDefault(),e.setState({page:h.signIn})},e.setPageToSignUp=function(t){t.preventDefault(),e.setState({page:h.signUp})},e.setPage=function(t,a){t.preventDefault(),e.setState({page:a})},e.setAuthToken=function(t){e.setState({authToken:t,page:""===t?h.signIn:h.signedInMain})},e.setUser=function(t){e.setState({user:t})},e.state={page:localStorage.getItem("Authorization")?h.signedInMain:h.signIn,authToken:localStorage.getItem("Authorization")||null,user:null},e.getCurrentUser(),e}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.page,a=e.user;return r.a.createElement("div",null,a?r.a.createElement(A,{page:t,setPage:this.setPage,setAuthToken:this.setAuthToken,user:a,setUser:this.setUser}):r.a.createElement(S,{page:t,setPage:this.setPage,setAuthToken:this.setAuthToken,setUser:this.setUser}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.ade7f7f3.chunk.js.map